<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Installation</title>
<style type="text/css">
/**
 * Prism.s theme ported from highlight.js's xcode style
 */
pre code {
  padding: 1em;
}
.token.comment {
  color: #007400;
}
.token.punctuation {
  color: #999;
}
.token.tag,
.token.selector {
  color: #aa0d91;
}
.token.boolean,
.token.number,
.token.constant,
.token.symbol {
  color: #1c00cf;
}
.token.property,
.token.attr-name,
.token.string,
.token.char,
.token.builtin {
  color: #c41a16;
}
.token.inserted {
  background-color: #ccffd8;
}
.token.deleted {
  background-color: #ffebe9;
}
.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #9a6e3a;
}
.token.atrule,
.token.attr-value,
.token.keyword {
  color: #836c28;
}
.token.function,
.token.class-name {
  color: #DD4A68;
}
.token.regex,
.token.important,
.token.variable {
  color: #5c2699;
}
.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}
</style>
<style type="text/css">
body {
  font-family: sans-serif;
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 1.5;
  box-sizing: border-box;
}
body, .footnotes, code { font-size: .9em; }
li li { font-size: .95em; }
*, *:before, *:after {
  box-sizing: inherit;
}
pre, img { max-width: 100%; }
pre, pre:hover {
  white-space: pre-wrap;
  word-break: break-all;
}
pre code {
  display: block;
  overflow-x: auto;
}
code { font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace; }
:not(pre) > code, code[class] { background-color: #F8F8F8; }
code.language-undefined, pre > code:not([class]) {
  background-color: inherit;
  border: 1px solid #eee;
}
table {
  margin: auto;
  border-top: 1px solid #666;
}
table thead th { border-bottom: 1px solid #ddd; }
th, td { padding: 5px; }
thead, tfoot, tr:nth-child(even) { background: #eee; }
blockquote {
  color: #666;
  margin: 0;
  padding-left: 1em;
  border-left: 0.5em solid #eee;
}
hr, .footnotes::before { border: 1px dashed #ddd; }
.frontmatter { text-align: center; }
#TOC .numbered li { list-style: none; }
#TOC .numbered { padding-left: 0; }
#TOC .numbered ul { padding-left: 1em; }
table, .body h2 { border-bottom: 1px solid #666; }
.body .appendix, .appendix ~ h2 { border-bottom-style: dashed; }
.footnote-ref a::before { content: "["; }
.footnote-ref a::after { content: "]"; }
.footnotes::before {
  content: "";
  display: block;
  max-width: 20em;
}

@media print {
  body {
    font-size: 12pt;
    max-width: 100%;
  }
  tr, img { page-break-inside: avoid; }
}
@media only screen and (min-width: 992px) {
  pre { white-space: pre; }
}
</style>
</head>
<body>
<div class="include-before">
</div>
<div class="frontmatter">
<div class="title"><h1>Installation</h1></div>
<div class="author"><h2></h2></div>
<div class="date"><h3></h3></div>
</div>
<div class="body">
<h2 id="installing-sen2r_1">Installing <span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span></h2>
<p>Instruction are provided separately for each OS:</p>
<ul>
<li><a href="#on-linux-systems">Install on Linux systems</a></li>
<li><a href="#on-windows">Install on Windows</a></li>
<li><a href="#on-macos">Install on MacOS</a></li>
</ul>
<p>Alternatively, <span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span> can be used <a href="docker.html">in a Docker container</a>.</p>
<h3 id="on-linux-systems"><i class="fa fa-linux" aria-hidden="true"></i> On Linux systems</h3>
<h4 id="installing-dependencies">Installing dependencies</h4>
<p>Before installing <span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>, it is recommended to check <a href="https://cran.r-project.org/bin/linux/">R</a> (v. 3.4.4 or higher) and the following libraries to be present:</p>
<ul>
<li><a href="https://gdal.org/">GDAL</a>, <a href="https://proj4.org/">PROJ</a> and <a href="https://trac.osgeo.org/geos/">GEOS</a>
(required by <a href="https://r-forge.r-project.org/projects/rgdal/">rgdal</a>
and <a href="https://r-forge.r-project.org/projects/rgeos/">rgeos</a>);</li>
<li><a href="https://stedolan.github.io/jq/">jq</a>
(required by <a href="https://github.com/ropensci/jqr/">jqr</a>);</li>
<li><a href="https://github.com/protocolbuffers/protobuf/">protobuf</a>
(required by <a href="https://github.com/jeroen/protolite/">protolite</a>);</li>
<li><a href="https://v8.dev/">V8</a>
(required by <a href="https://github.com/ropensci/geojsonio/">geojsonio</a>);</li>
<li><a href="https://www.openssl.org/">openssl</a>
(required by <a href="https://github.com/jeroen/openssl/">openssl</a>);</li>
<li><a href="https://www.cairographics.org/">cairo</a>
(required by <a href="https://github.com/davidgohel/gdtools/">gdtools</a>);</li>
<li><a href="https://curl.se/libcurl/">libcurl</a>
(required by <a href="https://github.com/jeroen/curl/">curl</a>);</li>
<li><a href="https://www.unidata.ucar.edu/software/netcdf/">NetCDF</a>
(required by <a href="https://github.com/dis-organization/ncdf4/">ncdf4</a>);</li>
<li><a href="http://xmlsoft.org/">libxml2</a>
(required by <a href="https://CRAN.R-project.org/package=XML/">XML</a>).</li>
</ul>
<p>Some external dependencies are required to run specific
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>
features:</p>
<ul>
<li><a href="http://step.esa.int/main/snap-supported-plugins/sen2cor/"><strong>Sen2Cor</strong></a>
is used to perform atmospheric correction of Sentinel-2 Level-1C products:
it is required by the package, unless you choose not to correct products locally
(using only Level-1C – TOA products or downloading directly Level-2A products);</li>
<li><a href="https://gdal.org/"><strong>GDAL</strong></a>
is required to smooth/bufferise a cloud mask, and can be optionally used
to compute spectral indices, RGB images and thumbnails;</li>
<li><a href="https://aria2.github.io/"><strong>aria2</strong></a> is an alternative downloader which
can be used to faster the download of SAFE archives; it can be optionally
installed and used.</li>
</ul>
<p>To install both package dependencies and runtime binaries (excepting <strong>Sen2Cor</strong>, which is installed by <span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>):</p>
<ul>
<li>
<p>On Ubuntu:</p>
<ul>
<li>
<p>Ubuntu 20.04 LTS Focal and newer:</p>
<pre><code class="language-bash">sudo apt install -y r-base gdal-bin aria2 libpython2-dev libudunits2-dev libgdal-dev libjq-dev libprotobuf-dev protobuf-compiler libv8-dev libssl-dev libcairo2-dev
</code></pre>
</li>
<li>
<p>Older distros:</p>
<pre><code class="language-bash">sudo apt-get install -y r-base gdal-bin python-gdal aria2 libpython-dev libudunits2-dev libgdal-dev libjq-dev libprotobuf-dev protobuf-compiler libv8-dev libssl-dev libcairo2-dev
</code></pre>
</li>
</ul>
<p>On Ubuntu 16.04 LTS Xenial, the repositories <a href="https://launchpad.net/~ubuntugis">ubuntugis</a> and <a href="https://launchpad.net/~opencpu">opencpu</a> must be added before installing the packages:</p>
<pre><code>  ```bash
  sudo add-apt-repository -y ppa:opencpu/jq
  sudo add-apt-repository -y ppa:ubuntugis/ubuntugis-unstable
  sudo apt-get update -q
  ```
</code></pre>
<p>Installation was tested over Ubuntu 20.04 LTS focal and 18.04 LTS Bionic; non-LTS versions &gt; 18.04 and Ubuntu 16.04 LTS Xenial should work. Other releases (Ubuntu non-LTS &lt; 18.04; Ubuntu LTS ≤ 14.04) are not supported.</p>
</li>
<li>
<p>On Debian:</p>
<pre><code class="language-bash">sudo apt-get install -y r-base gdal-bin python-gdal aria2 libpython-dev libudunits2-dev libgdal-dev libjq-dev libprotobuf-dev protobuf-compiler libnode-dev libssl-dev libcairo2-dev proj-epsg
</code></pre>
<p>Installation was tested over Debian 9 Stretch; older releases are not supported.</p>
</li>
<li>
<p>On Fedora:</p>
<pre><code class="language-bash">sudo yum install R gdal gdal-python aria2 python-devels gdal-devel proj-devel geos-devel udunits2-devel jq-devel protobuf-devel v8-devel openssl-devel cairo-devel libcurl-devel netcdf-devel libxml2-devel
</code></pre>
<p>Installation was tested over Fedora 29.</p>
</li>
<li>
<p>On ArchLinux:</p>
<pre><code class="language-bash">sudo pacman -S --noconfirm r base-devel gcc-fortran python-gdal wget aria2 jq protobuf git
cd /tmp; git clone https://aur.archlinux.org/gyp-git.git
cd gyp-git; makepkg -si --noconfirm
cd /tmp; git clone https://aur.archlinux.org/v8-3.14.git
cd v8-3.14; makepkg -si --noconfirm
cd /tmp; git clone https://aur.archlinux.org/udunits.git
cd udunits; makepkg -si --noconfirm
</code></pre>
<p>Installation was tested on date 2018-11-21.</p>
</li>
</ul>
<h4 id="installing-sen2r_2">Installing <span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span></h4>
<p>Before proceeding, it is suggested to update the existing R packages:</p>
<pre><code class="language-r">update.packages(ask = FALSE)
</code></pre>
<p>Doing that, the following warning could appear:</p>
<pre><code>Warning in install.packages(update[instlib == l, &quot;Package&quot;], l, contriburl = contriburl,  :
  'lib = &quot;/usr/lib/R/library&quot;' is not writable
Would you like to use a personal library instead?  (y/n)
</code></pre>
<p>If so, press <code>y</code> and continue.
Moreover, if no personal libraries already exist, it is asked to create a new one: ask <code>y</code> and continue.</p>
<p>After that, the package can be installed from CRAN:</p>
<pre><code class="language-r">install.packages(&quot;sen2r&quot;, dependencies = TRUE)
</code></pre>
<p>The parameter <code>dependencies = TRUE</code> is used to install also suggested dependencies,
which includes Shiny packages required to run the Graphical User Interface.
Anyway, it could be omitted as Shiny packages can be installed later, before running the GUI.</p>
<p>Alternatively, the development version can be installed from GitHub with the R package <strong>remotes</strong>.
To do it:</p>
<ol>
<li>
<p>install the package <strong>remotes</strong>, if missing:</p>
<pre><code class="language-r">install.packages(&quot;remotes&quot;)
</code></pre>
</li>
<li>
<p>load it and install
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span
style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span
style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>:</p>
<pre><code class="language-r">library(remotes)
install_github(&quot;ranghetti/sen2r&quot;, dependencies = TRUE)
</code></pre>
</li>
</ol>
<p>This will install the R package along with its package dependencies,
containing all the functions necessary to preprocess data.</p>
<p>Finally, <strong>Sen2Cor</strong> can be installed from R:</p>
<pre><code class="language-r">library(sen2r)
install_sen2cor()
</code></pre>
<h3 id="on-windows"><i class="fa fa-windows" aria-hidden="true"></i> On Windows</h3>
<p><a href="https://cran.r-project.org/bin/windows/base/">R</a> must be installed before proceeding.</p>
<p>In the case it was already installed, it is suggested to update the existing R packages:</p>
<pre><code class="language-r">update.packages(ask = FALSE)
</code></pre>
<p><span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span> can be installed from CRAN:</p>
<pre><code class="language-r">install.packages(&quot;sen2r&quot;)
</code></pre>
<p>Alternatively, the development version can be installed from GitHub with the R package <strong>remotes</strong>.
To do it:</p>
<ol>
<li>
<p>install the package <strong>remotes</strong>, if missing:</p>
<pre><code class="language-r">install.packages(&quot;remotes&quot;)
</code></pre>
</li>
<li>
<p>load it and install
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span
style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span
style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>:</p>
<pre><code class="language-r">library(remotes)
install_github(&quot;ranghetti/sen2r&quot;)
</code></pre>
</li>
</ol>
<p>This will install the R package along with its package dependencies,
containing all the functions necessary to preprocess data.</p>
<h3 id="on-macos"><i class="fa fa-apple" aria-hidden="true"></i> On MacOS</h3>
<p><a href="https://cran.r-project.org/bin/windows/base/">R</a> must be installed before proceeding.</p>
<p>In the case it was already installed, it is suggested to update the existing R packages:</p>
<pre><code class="language-r">update.packages(ask = FALSE)
</code></pre>
<p>Packages can be installed using the compiled binaries, except from <strong>sp</strong>, <strong>sf</strong>, <strong>rgdal</strong> and <strong>rgeos</strong>,
which are recommended to be compiled. To do it, use the command</p>
<pre><code class="language-r">install.packages(c(&quot;sp&quot;, &quot;sf&quot;, &quot;rgdal&quot;, &quot;rgeos&quot;), type = &quot;source&quot;)
</code></pre>
<p><strong>after</strong> having installed GDAL as described above.</p>
<p><span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span> can be installed from CRAN:</p>
<pre><code class="language-r">install.packages(&quot;sen2r&quot;)
</code></pre>
<p>Alternatively, the development version can be installed from GitHub with the R package <strong>remotes</strong>.
To do it:</p>
<ol>
<li>
<p>install the package <strong>remotes</strong>, if missing:</p>
<pre><code class="language-r">install.packages(&quot;remotes&quot;)
</code></pre>
</li>
<li>
<p>load it and install
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span
style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span
style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>:</p>
<pre><code class="language-r">library(remotes)
install_github(&quot;ranghetti/sen2r&quot;)
</code></pre>
</li>
</ol>
<p>This will install the R package along with its package dependencies,
containing all the functions necessary to preprocess data.</p>
<h3 id="installing-sen2cor">Installing Sen2Cor</h3>
<p><a href="http://step.esa.int/main/snap-supported-plugins/sen2cor/"><strong>Sen2Cor</strong></a>
is used to perform atmospheric correction of Sentinel-2 Level-1C products,
so its installation can be skipped in case this function is not required
by the user (using only Level-1C – TOA products
or downloading directly Level-2A products).</p>
<p>It can be graphically checked / installed launching the function</p>
<pre><code class="language-r">library(sen2r)
check_sen2r_deps()
</code></pre>
<p>This function opens a GUI which help to check if this and other dependencies
are satisfied;
from this GUI a new Sen2Cor installation can be performed,
or an existing environment can be linked to Sen2Cor.</p>
<p>Alternatively, it can be installed from the command line with the
following function:</p>
<pre><code class="language-r">install_sen2cor()
</code></pre>
<h3 id="installing-other-dependencies-generally-unrequired-and-discouraged">Installing other dependencies (generally unrequired and discouraged)</h3>
<p>Other dependencies can be configure to run specific
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>
features; their installation is generally unrequired (they do not add relevant
improvements to the package) and discouraged (errors could occur).</p>
<ul>
<li><a href="https://gdal.org/"><strong>GDAL</strong></a>
is no more required, being used only to smooth/bufferise a cloud mask
(and <em>optionally</em> to compute spectral indices, RGB images and thumbnails).
On Windows, to avoid incompatibilities, it is <em>strictly mandatory</em>
to use a GDAL installation provided with the
<a href="https://qgis.org/it/site/forusers/download.html">OSGeo4W installer</a>:
if this requirement is not satisfied, it is possible to install GDAL
with OSGeo4W directly from R (see below).
<strong>Note</strong>: configuring a runtime <strong>GDAL</strong> environment could fail for different reasons
(e.g. problems related to GDAL environment like missing libraries,
or custom environment variables which could conflict).
<span style="color:#5793dd;vertical-align:top;font-size:90%;font-weight:normal;">sen</span><span style="color:#6a7077;vertical-align:baseline;font-size:115%;font-weight:bolder;">2</span><span style="color:#2f66d5;vertical-align:baseline;font-size:90%;font-weight:bold;">r</span>
maintainers are not responsible in case of GDAL-related issues
(no assistance is provided in this case).</li>
<li><a href="https://aria2.github.io/"><strong>aria2</strong></a> is an alternative downloader which
can be used to faster the download of SAFE archives; it can be optionally
installed and used.
Since the number of concurrent downloads from ESA SciHub is limited to 2,
the use of <strong>aria2</strong> is generally not faster than the default downloader;
for this reason, its use is recommended only in case of problems with
the default downloader.</li>
</ul>
<p>These dependences can be graphically checked launching the function</p>
<pre><code class="language-r">library(sen2r)
check_sen2r_deps()
</code></pre>
<p>Alternatively, they can be installed individually from the command line with the
following functions (see their respective references for further details):</p>
<pre><code class="language-r">check_gdal()
install_aria2()
</code></pre>
<h4 id="note-on-gdal-installation-on-macos">Note on GDAL installation on MacOS</h4>
<p>In order to avoid incompatibilities with GDAL, it is <em>strictly mandatory</em> to use
a GDAL installation provided with the
<a href="https://github.com/OSGeo/homebrew-osgeo4mac">OSGeo Homebrew repository</a>.
To do it:</p>
<ol>
<li>
<p>if Homebrew is missing on your system, install it opening a terminal and typing:</p>
<pre><code class="language-bash">/usr/bin/ruby -e &quot;$(curl -fsSL https://github.com/Homebrew/install/raw/master/install)&quot;
</code></pre>
<p>(see <a href="https://brew.sh/">the Homebrew webpage</a> for details);</p>
</li>
<li>
<p>install GDAL by typing:</p>
<pre><code class="language-bash">brew tap osgeo/osgeo4mac
brew install osgeo-gdal-python
</code></pre>
<p>(see <a href="https://github.com/OSGeo/homebrew-osgeo4mac">the OSGeo Homebrew webpage</a> for details).
At this step, an error could be returned in case another GDAL installation was already present;
in this case, follow the instruction returned in the terminal to solve it
(probably some packages must be unlinked with the instructions <code>brew unlink &lt;package&gt;</code>).</p>
</li>
</ol>
</div>
<div class="include-after">
</div>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" defer></script>
</body>
</html>
